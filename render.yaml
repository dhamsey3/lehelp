{
  "$schema": "https://render.com/schema/v1",
  "services": [
    {
      "type": "web",
      "name": "lehelp-backend",
      "env": "node",
      "region": "oregon",
      "plan": "free",
      "buildCommand": "cd backend/api-gateway && npm install && npm run build",
      "startCommand": "cd backend/api-gateway && npm start",
      "healthCheckPath": "/health",
      "envVars": [
        {
          "key": "NODE_ENV",
          "value": "production"
        },
        {
          "key": "PORT",
          "value": "3000"
        },
        {
          "key": "DATABASE_URL",
          "fromDatabase": {
            "name": "lehelp-postgres",
            "property": "connectionString"
          }
        },
        {
          "key": "REDIS_URL",
          "fromDatabase": {
            "name": "lehelp-redis",
            "property": "connectionString"
          }
        },
        {
          "key": "JWT_SECRET",
          "generateValue": true
        },
        {
          "key": "REFRESH_TOKEN_SECRET",
          "generateValue": true
        },
        {
          "key": "ENCRYPTION_KEY",
          "generateValue": true
        },
        {
          "key": "SESSION_SECRET",
          "generateValue": true
        }
      ]
    },
    {
      "type": "web",
      "name": "lehelp-ai-service",
      "env": "python",
      "region": "oregon",
      "plan": "free",
      "buildCommand": "cd ai-services && pip install -r requirements.txt",
      "startCommand": "cd ai-services && gunicorn main:app --workers 2 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000",
      "healthCheckPath": "/health",
      "envVars": [
        {
          "key": "PYTHON_VERSION",
          "value": "3.11"
        }
      ]
    }
  ],
  "databases": [
    {
      "name": "lehelp-postgres",
      "plan": "free",
      "databaseName": "lehelp_db",
      "user": "lehelp_user"
    },
    {
      "name": "lehelp-redis",
      "plan": "free"
    }
  ]
}
